!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.kelbas={})}(this,function(t){"use strict";const e=()=>{let t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return"p"+(t()+t())+"-"+t()};class n{constructor(t,...e){this.values_map=[],this.concat_string=this.concat_string.bind(this),this.add_event_listeners=this.add_event_listeners.bind(this),this.string=this.concat_string(t,e)}concat_string(t,n){return t.map((t,r)=>{const s=n[r],i=e();return"function"==typeof s&&(t=t.concat(`"${i} `),this.values_map.push({id:i,value:s})),"string"==typeof s&&(t=`${t}${s||""}`),t}).reduce((t,e)=>t+e)}get fragment(){const t=document.createElement("template");return t.innerHTML=this.string,this.add_event_listeners(t.content.cloneNode(!0))}get container(){let t=(new DOMParser).parseFromString(this.string,"text/html");return this.add_event_listeners(t.body.firstChild)}get svg(){let t=new DOMParser;const e=this.container;return e.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.parseFromString(e.outerHTML,"image/svg+xml").documentElement}add_event_listeners(t){return this.values_map.forEach(e=>{const n=t.outerHTML?t.parentNode.querySelector(`[${e.id}]`):t.querySelector(`[${e.id}]`),r=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.removeAttribute(`on${r}`),n.addEventListener(r,e.value.bind(this))}),t}}function r(t,...e){return new n(t,...e)}window.HTML=r,t.HTML=r,Object.defineProperty(t,"__esModule",{value:!0})});
