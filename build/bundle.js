!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.kelbas={})}(this,function(t){"use strict";const e=()=>{let t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return"p"+(t()+t())+"-"+t()};class n{constructor(t,...e){this.values_map=[],this.concat_string=this.concat_string.bind(this),this.add_event_listeners=this.add_event_listeners.bind(this),this.string=this.concat_string(t,e)}concat_string(t,n){return t.map((t,s)=>{const r=n[s],i=e();return"function"==typeof r&&(t=t.concat(`"${i} `),this.values_map.push({id:i,value:r})),"string"==typeof r&&(t=`${t}${r||""}`),t}).reduce((t,e)=>t+e)}get fragment(){const t=document.createElement("template");return t.innerHTML=this.string,this.add_event_listeners(t.content.cloneNode(!0))}get container(){const t=(new DOMParser).parseFromString(this.string,"text/html").body.firstChild;return this.add_event_listeners(t)}add_event_listeners(t){return this.values_map.forEach(e=>{const n=t.outerHTML?t.parentNode.querySelector(`[${e.id}]`):t.querySelector(`[${e.id}]`),s=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.removeAttribute(`on${s}`),n.addEventListener(s,e.value.bind(this))}),t}}function s(t,...e){return new n(t,...e)}window.HTML=s,t.HTML=s,Object.defineProperty(t,"__esModule",{value:!0})});
