const UUID=()=>{let t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return"p"+(t()+t())+"-"+t()};class Parser{constructor(t,...e){this.values_map=[],this.concat_string=this.concat_string.bind(this),this.add_event_listeners=this.add_event_listeners.bind(this),this.string=this.concat_string(t,e)}concat_string(t,e){return t.map((t,n)=>{const r=e[n],s=UUID();return"function"==typeof r&&(t=t.concat(`"${s} `),this.values_map.push({id:s,value:r})),"string"==typeof r&&(t=`${t}${r||""}`),t}).reduce((t,e)=>t+e)}get fragment(){const t=document.createElement("template");return t.innerHTML=this.string,this.add_event_listeners(t.content.cloneNode(!0))}get container(){return(new DOMParser).parseFromString(this.string,"text/html").body.firstChild}add_event_listeners(t){return this.values_map.forEach(e=>{const n=t.querySelector(`[${e.id}]`),r=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.removeAttribute(`on${r}`),n.addEventListener(r,e.value.bind(this))}),t}}function HTML(t,...e){return new Parser(t,...e)}window.HTML=HTML;
